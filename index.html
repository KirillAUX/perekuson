<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#A63F00">
    <meta name="description" content="–ü–µ—Ä–µ–∫—É—Å–æ–Ω - –±—ã—Å—Ç—Ä—ã–µ –∏ –≤–∫—É—Å–Ω—ã–µ –ø–µ—Ä–µ–∫—É—Å—ã –¥–ª—è –∑–∞–Ω—è—Ç—ã—Ö –ª—é–¥–µ–π">
    <meta name="keywords" content="–µ–¥–∞, –¥–æ—Å—Ç–∞–≤–∫–∞, –±—É—Ä–≥–µ—Ä—ã, –ø–µ—Ä–µ–∫—É—Å—ã, fastfood">
    <title>–ü–µ—Ä–µ–∫—É—Å–æ–Ω - –ë—ã—Å—Ç—Ä—ã–µ –ø–µ—Ä–µ–∫—É—Å—ã</title>
    
    <!-- PWA –º–µ—Ç–∞-—Ç–µ–≥–∏ -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icon.png" type="image/x-icon">
    <link rel="apple-touch-icon" href="icon.png">
    
    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Preload –≤–∞–∂–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ -->
    <link rel="preload" href="js/auth.js" as="script">
    <link rel="preload" href="style.css" as="style">
</head>
<body>
    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å—Ç–∞–Ω–æ–≤–∫–µ -->
    <div id="installPrompt" class="install-prompt" style="display: none;">
        <div class="install-content">
            <div class="install-icon">üì±</div>
            <h3>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ü–µ—Ä–µ–∫—É—Å–æ–Ω</h3>
            <p>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —Å–≤–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∏ —Ä–∞–±–æ—Ç—ã –æ—Ñ—Ñ–ª–∞–π–Ω!</p>
            <div class="install-buttons">
                <button id="installButton" class="install-btn">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                <button id="dismissInstall" class="dismiss-btn">–ü–æ–∑–∂–µ</button>
            </div>
        </div>
    </div>

    <!-- –û—Ñ—Ñ–ª–∞–π–Ω —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
    <div id="offlineAlert" class="offline-alert" style="display: none;">
        <span>üì∂ –í—ã –≤ –æ—Ñ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º–µ. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã.</span>
        <button onclick="location.reload()" class="reload-btn">–û–±–Ω–æ–≤–∏—Ç—å</button>
    </div>

    <header>
        <div class="head">
            <img class="img1" src="icon.png" alt="–ò–∫–æ–Ω–∫–∞ –ü–µ—Ä–µ–∫—É—Å–æ–Ω" loading="lazy" width="70" height="70">
            <span>–ü–µ—Ä–µ–∫—É—Å–æ–Ω</span>
        </div>
        <div class="profile-dropdown">
            <button class="profile-btn initials-btn" id="profileBtn" aria-label="–ú–µ–Ω—é –ø—Ä–æ—Ñ–∏–ª—è">üë§</button>
            <div class="dropdown-menu" id="dropdownMenu">
                <div class="menu-guest">
                    <a href="login.html" class="nav-link">üîë –í—Ö–æ–¥</a>
                    <a href="register.html" class="nav-link">üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                </div>
                <div class="menu-user" style="display: none;">
                    <a href="profile.html" class="nav-link">üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</a>
                    <a href="orders.html" class="nav-link">üì¶ –ú–æ–∏ –∑–∞–∫–∞–∑—ã</a>
                    <a href="settings.html" class="nav-link">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
                    <a href="#" class="da nav-link" onclick="logout()">üö™ –í—ã–π—Ç–∏</a>
                </div>
            </div>
        </div>
    </header>
    
    <nav>
        <a href="index.html" class="nav-button active">üè† –ì–ª–∞–≤–Ω–∞—è</a>
        <a href="menu.html" class="nav-button">üçî –ú–µ–Ω—é</a>
        <a href="cart.html" class="nav-button">üõí –ö–æ—Ä–∑–∏–Ω–∞ (<span id="cartCount">0</span>)</a>
        <a href="about.html" class="nav-button">‚ÑπÔ∏è –û –Ω–∞—Å</a>
        <a href="#" class="nav-button admin-only" id="adminPanelBtn" onclick="toggleAdminPanel()" style="display: none; background: #dc3545;">
            üîß –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
        </a>
    </nav>

    <main>
        <div class="container">
            <!-- –ì–µ—Ä–æ–π-—Å–µ–∫—Ü–∏—è -->
            <section class="hero-section">
                <div class="hero-content">
                    <h1>üçî –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ü–µ—Ä–µ–∫—É—Å–æ–Ω!</h1>
                    <p class="hero-subtitle">–ë—ã—Å—Ç—Ä—ã–µ –∏ –≤–∫—É—Å–Ω—ã–µ –ø–µ—Ä–µ–∫—É—Å—ã –¥–ª—è –∑–∞–Ω—è—Ç—ã—Ö –ª—é–¥–µ–π</p>
                    <div class="hero-stats">
                        <div class="stat">
                            <span class="stat-number">5</span>
                            <span class="stat-label">–º–∏–Ω—É—Ç</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">600+</span>
                            <span class="stat-label">—Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">24/7</span>
                            <span class="stat-label">–¥–æ—Å—Ç–∞–≤–∫–∞</span>
                        </div>
                    </div>
                    <button class="cta-button" onclick="location.href='menu.html'">
                        üçï –°–º–æ—Ç—Ä–µ—Ç—å –º–µ–Ω—é
                    </button>
                </div>
            </section>

            <!-- –ë—ã—Å—Ç—Ä–æ–µ –º–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π -->
            <section class="quick-actions">
                <h2>üöÄ –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
                <div class="action-grid">
                    <button class="action-btn" onclick="showCategory('burgers')" data-category="burgers">
                        <span>üçî</span>
                        <span>–ë—É—Ä–≥–µ—Ä—ã</span>
                    </button>
                    <button class="action-btn" onclick="showCategory('snacks')" data-category="snacks">
                        <span>üçü</span>
                        <span>–ó–∞–∫—É—Å–∫–∏</span>
                    </button>
                    <button class="action-btn" onclick="showCategory('drinks')" data-category="drinks">
                        <span>ü•§</span>
                        <span>–ù–∞–ø–∏—Ç–∫–∏</span>
                    </button>
                    <button class="action-btn" onclick="showCategory('desserts')" data-category="desserts">
                        <span>üç∞</span>
                        <span>–î–µ—Å–µ—Ä—Ç—ã</span>
                    </button>
                </div>
            </section>

            <!-- –°—Ç–∞—Ç—É—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
            <div class="auth-status">
                <p>–°—Ç–∞—Ç—É—Å: <span id="status">–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω</span></p>
                <div id="userGreeting" style="display: none;">
                    <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span id="userName"></span>! üéâ</p>
                </div>
            </div>

            <!-- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å -->
            <div id="adminPanel" class="admin-panel" style="display: none;">
                <h2>üîß –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>
                <div class="admin-stats">
                    <div class="admin-stat">
                        <span class="admin-stat-number" id="totalUsers">0</span>
                        <span class="admin-stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</span>
                    </div>
                    <div class="admin-stat">
                        <span class="admin-stat-number" id="activePromotionsCount">0</span>
                        <span class="admin-stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∞–∫—Ü–∏–π</span>
                    </div>
                </div>
                
                <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∞–∫—Ü–∏–∏ -->
                <div class="admin-section">
                    <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∞–∫—Ü–∏—é</h3>
                    <form id="addPromotionForm" class="admin-form">
                        <div class="form-group">
                            <label for="promotionTitle">–ù–∞–∑–≤–∞–Ω–∏–µ –∞–∫—Ü–∏–∏:</label>
                            <input type="text" id="promotionTitle" required maxlength="100" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∞–∫—Ü–∏–∏">
                        </div>
                        <div class="form-group">
                            <label for="promotionDescription">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                            <textarea id="promotionDescription" rows="3" required maxlength="500" placeholder="–û–ø–∏—à–∏—Ç–µ –∞–∫—Ü–∏—é"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="promotionImage">URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:</label>
                            <input type="url" id="promotionImage" placeholder="https://example.com/image.jpg">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="promotionStartDate">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞:</label>
                                <input type="date" id="promotionStartDate" required>
                            </div>
                            <div class="form-group">
                                <label for="promotionEndDate">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è:</label>
                                <input type="date" id="promotionEndDate" required>
                            </div>
                        </div>
                        <button type="submit" class="submit-btn">üéâ –î–æ–±–∞–≤–∏—Ç—å –∞–∫—Ü–∏—é</button>
                    </form>
                </div>

                <!-- –°–ø–∏—Å–æ–∫ –∞–∫—Ü–∏–π –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
                <div class="admin-section">
                    <h3>üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ü–∏—è–º–∏</h3>
                    <div id="promotionsList" class="promotions-list">
                        <p class="no-data">–ê–∫—Ü–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</p>
                    </div>
                </div>
            </div>

            <!-- –ê–∫—Ü–∏–∏ -->
            <section class="promotions-section">
                <div class="section-header">
                    <h2>üéâ –¢–µ–∫—É—â–∏–µ –∞–∫—Ü–∏–∏</h2>
                    <span id="promotionsCounter" class="promotions-counter">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                </div>
                <div id="promotionsContainer" class="promotions-container">
                    <div class="skeleton-promotion">
                        <div class="skeleton-image"></div>
                        <div class="skeleton-content">
                            <div class="skeleton-title"></div>
                            <div class="skeleton-text"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã -->
            <section class="popular-section">
                <h2>üî• –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã</h2>
                <div id="popularProducts" class="products-grid">
                    <!-- –¢–æ–≤–∞—Ä—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                </div>
            </section>

            <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ -->
            <section id="categoriesSection" class="categories-section">
                <h2>üì¶ –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>
                <div class="categories-loading">
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –º–µ–Ω—é...</p>
                </div>
            </section>

            <!-- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ -->
            <section class="benefits-section">
                <h2>‚≠ê –ü–æ—á–µ–º—É –≤—ã–±–∏—Ä–∞—é—Ç –Ω–∞—Å?</h2>
                <div class="benefits-grid">
                    <div class="benefit-card">
                        <div class="benefit-icon">üöÄ</div>
                        <h3>–ë—ã—Å—Ç—Ä–æ</h3>
                        <p>–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ - 5 –º–∏–Ω—É—Ç</p>
                    </div>
                    <div class="benefit-card">
                        <div class="benefit-icon">üå±</div>
                        <h3>–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ</h3>
                        <p>–ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ —Å–≤–µ–∂–∏–µ –∏ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã</p>
                    </div>
                    <div class="benefit-card">
                        <div class="benefit-icon">üí∞</div>
                        <h3>–î–æ—Å—Ç—É–ø–Ω–æ</h3>
                        <p>–î–µ–º–æ–∫—Ä–∞—Ç–∏—á–Ω—ã–µ —Ü–µ–Ω—ã –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–º –∫–∞—á–µ—Å—Ç–≤–µ</p>
                    </div>
                    <div class="benefit-card">
                        <div class="benefit-icon">üöö</div>
                        <h3>–£–¥–æ–±–Ω–æ</h3>
                        <p>–ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –∏ —Å–∞–º–æ–≤—ã–≤–æ–∑</p>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö -->
    <div class="bottom-nav">
        <a href="index.html" class="bottom-nav-btn active" aria-label="–ì–ª–∞–≤–Ω–∞—è">üè†</a>
        <a href="menu.html" class="bottom-nav-btn" aria-label="–ú–µ–Ω—é">üçî</a>
        <a href="cart.html" class="bottom-nav-btn" aria-label="–ö–æ—Ä–∑–∏–Ω–∞">üõí</a>
        <a href="profile.html" class="bottom-nav-btn" aria-label="–ü—Ä–æ—Ñ–∏–ª—å">üë§</a>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>üçî –ü–µ—Ä–µ–∫—É—Å–æ–Ω</h3>
                <p>–ë—ã—Å—Ç—Ä—ã–µ –∏ –≤–∫—É—Å–Ω—ã–µ –ø–µ—Ä–µ–∫—É—Å—ã –¥–ª—è –∑–∞–Ω—è—Ç—ã—Ö –ª—é–¥–µ–π</p>
            </div>
            <div class="footer-section">
                <h3>üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
                <p>–¢–µ–ª–µ—Ñ–æ–Ω: +7 (999) 123-45-67</p>
                <p>Email: info@perekuson.ru</p>
            </div>
            <div class="footer-section">
                <h3>üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞</h3>
                <button onclick="clearAppData()" class="text-btn">üßπ –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</button>
                <button onclick="showDebugInfo()" class="text-btn">üêõ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏</button>
            </div>
            <div class="footer-copyright">
                <p>&copy; 2025 –ü–µ—Ä–µ–∫—É—Å–æ–Ω. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
                <p class="app-version">–í–µ—Ä—Å–∏—è 1.0.0</p>
            </div>
        </div>
    </footer>
    
    <!-- –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
    <script src="js/auth.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/app.js"></script>
    <script src="js/main.js"></script>
    
    <!-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <script>
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
        document.addEventListener('DOMContentLoaded', function() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            updateUserGreeting();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
            loadPopularProducts();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤ –¥–ª—è –∞–¥–º–∏–Ω–∞
            if (authSystem && authSystem.isAdmin()) {
                updateAdminStats();
            }
        });

        function updateUserGreeting() {
            const user = authSystem.getCurrentUser();
            const greetingElement = document.getElementById('userGreeting');
            const userNameElement = document.getElementById('userName');
            
            if (user && greetingElement && userNameElement) {
                userNameElement.textContent = user.username;
                greetingElement.style.display = 'block';
                document.querySelector('.auth-status p').style.display = 'none';
            }
        }

        function loadPopularProducts() {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã –∑–∞–ø—Ä–æ—Å –∫ API
            setTimeout(() => {
                const popularContainer = document.getElementById('popularProducts');
                if (popularContainer && typeof app !== 'undefined') {
                    const popularProducts = app.products.slice(0, 4); // –ü–µ—Ä–≤—ã–µ 4 —Ç–æ–≤–∞—Ä–∞
                    popularContainer.innerHTML = popularProducts.map(product => 
                        app.renderProduct(product)
                    ).join('');
                }
            }, 1000);
        }

        function updateAdminStats() {
            if (authSystem && authSystem.getStats) {
                const stats = authSystem.getStats();
                document.getElementById('totalUsers').textContent = stats.totalUsers;
                document.getElementById('activePromotionsCount').textContent = stats.activePromotions;
            }
        }

        function showDebugInfo() {
            const debugInfo = `
                –í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: 1.0.0
                –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${authSystem.isAuthenticated() ? authSystem.getCurrentUser().username : '–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω'}
                –ê–¥–º–∏–Ω: ${authSystem.isAdmin() ? '–î–∞' : '–ù–µ—Ç'}
                –û–Ω–ª–∞–π–Ω: ${navigator.onLine ? '–î–∞' : '–ù–µ—Ç'}
                –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è: ${navigator.language}
                –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: ${navigator.platform}
            `;
            alert(debugInfo);
        }

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫
        function showCategory(category) {
            if (typeof app !== 'undefined' && app.showCategory) {
                app.showCategory(category);
            } else {
                // Fallback - –ø–µ—Ä–µ—Ö–æ–¥ –≤ –º–µ–Ω—é
                window.location.href = 'menu.html';
            }
        }

        function clearAppData() {
            if (typeof app !== 'undefined' && app.clearAppData) {
                app.clearAppData();
            } else {
                if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è?')) {
                    localStorage.clear();
                    sessionStorage.clear();
                    location.reload();
                }
            }
        }
    </script>
</body>

</html>
